<!-- templates/index.html -->

<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Protokoll-Tool</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <h1 class="mb-4 text-center">üéôÔ∏è Automatisches Protokoll-Tool</h1>

    {% if error %}
      <div class="alert alert-danger">
        {{ error|safe }}
      </div>
    {% endif %}

    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <form method="post" enctype="multipart/form-data">
          <div class="mb-3">
            <label for="audio_file" class="form-label">Audiodatei hochladen</label>
            <input class="form-control" type="file" id="audio_file" name="audio_file" accept="audio/*" required>
          </div>

          <div class="mb-3">
            <label for="prompt" class="form-label">Prompt (anpassbar)</label>
            <textarea class="form-control" id="prompt" name="prompt" rows="10">{% raw %}
Du bist ein KI-Protokoll-Assistent. Analysiere das folgende Meeting-Transkript und erstelle:
1. Eine Zusammenfassung der Hauptpunkte
2. Eine Liste der getroffenen Entscheidungen
3. Eine Liste aller To-Dos mit Namen (falls genannt)

Am Ende gib bitte **zus√§tzlich** das **vollst√§ndige** Transkript **noch einmal** aus.

Transkript:
{transkript}

Gib die Antwort im folgenden Format aus:

## Zusammenfassung
...

## Entscheidungen
- ...

## To-Dos
- [Name]: [Aufgabe]

## Vollst√§ndiges Transkript
{transkript}
{% endraw %}</textarea>
          </div>

          <button type="submit" class="btn btn-primary">Transkribieren</button>
        </form>
      </div>
    </div>

    {% if transcript %}
      <div class="card mb-4 shadow-sm">
        <div class="card-header">
          <h5 class="mb-0">Ergebnis</h5>
        </div>
        <div class="card-body">
          <pre class="bg-white p-3">{{ transcript }}</pre>
          {% if excerpt_pdf_url %}
            <a href="{{ excerpt_pdf_url }}" class="btn btn-success mt-3">Protokoll-Auszug als PDF herunterladen</a>
          {% endif %}
        </div>
      </div>
    {% endif %}

  </div>
  <!-- Bootstrap JS (optional) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
